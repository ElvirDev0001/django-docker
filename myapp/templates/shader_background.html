<!DOCTYPE html>
<html>
<head>
    <style>
        body, html { margin: 0; padding: 0; overflow: hidden; }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Ensure it's behind other content */
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <script>
        function initializeWebGL() {
        var canvas = document.getElementById("canvas");
        var gl = canvas.getContext("webgl2");

        if (!gl) {
            alert("Your browser does not support WebGL2");
        }

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            gl.viewport(0, 0, canvas.width, canvas.height);
        }

        window.addEventListener('resize', resizeCanvas, false);
        resizeCanvas();

        var vsSource = `#version 300 es
        in vec2 vertPosition;
        void main() {
            gl_Position = vec4(vertPosition, 0.0, 1.0);
        }`;

        var fsSource = `#version 300 es
        precision highp float;
        uniform vec2 iResolution;
        uniform float iTime;
        uniform float iTimeDelta;
        uniform int iFrame;
        uniform vec4 iMouse;
        uniform vec4 iDate;
        out vec4 fragColor;

        float field(in vec3 p) {
            float strength = 7. + .03 * log(0.000001 + fract(sin(iTime) * 4373.11));
            float accum = 0.;
            float prev = 0.;
            float tw = 0.;
            for (int i = 0; i < 32; ++i) {
                float mag = dot(p, p);
                p = abs(p) / mag + vec3(-.5, -.4, -1.5);
                float w = exp(-float(i) / 7.);
                accum += w * exp(-strength * pow(abs(mag - prev), 2.3));
                tw += w;
                prev = mag;
            }
            return max(0., 5. * accum / tw - .7);
        }

        void main() {
            vec2 uv = 2. * gl_FragCoord.xy / iResolution.xy - 1.;
            vec2 uvs = uv * iResolution.xy / max(iResolution.x, iResolution.y);
            vec3 p = vec3(uvs / (4.), 0) + vec3(1., -1.3, 0.);
            p += .2 * vec3(sin(iTime / 16.), sin(iTime / 12.),  sin(iTime / 128.));
            float t = field(p);
            float v = (1. - exp((abs(uv.x) - 1.) * 6.)) * (1. - exp((abs(uv.y) - 1.) * 6.));
            fragColor = mix(.4, 1., v) * vec4(1.8 * t * t * t, 1.4 * t * t, t, 1.0);
        }`;
        

        var vertexShader = gl.createShader(gl.VERTEX_SHADER);
        gl.shaderSource(vertexShader, vsSource);
        gl.compileShader(vertexShader);

        // Check for vertex shader compilation errors
        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {
            console.error('ERROR compiling vertex shader!', gl.getShaderInfoLog(vertexShader));
            return;
        }

        var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
        gl.shaderSource(fragmentShader, fsSource);
        gl.compileShader(fragmentShader);

        // Check for fragment shader compilation errors
        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {
            console.error('ERROR compiling fragment shader!', gl.getShaderInfoLog(fragmentShader));
            return;
        }

        var program = gl.createProgram();
        gl.attachShader(program, vertexShader);
        gl.attachShader(program, fragmentShader);
        gl.linkProgram(program);
        gl.useProgram(program);

        var iResolutionLocation = gl.getUniformLocation(program, "iResolution");
        gl.uniform2f(iResolutionLocation, canvas.width, canvas.height);

        // Check for program linking errors
        if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
            console.error('ERROR linking program!', gl.getProgramInfoLog(program));
            return;
        }

        var iResolutionLocation = gl.getUniformLocation(program, "iResolution");
        var iTimeLocation = gl.getUniformLocation(program, "iTime");
        var iTimeDeltaLocation = gl.getUniformLocation(program, "iTimeDelta");
        var iFrameLocation = gl.getUniformLocation(program, "iFrame");
        var iMouseLocation = gl.getUniformLocation(program, "iMouse");
        var iDateLocation = gl.getUniformLocation(program, "iDate");

        var lastFrameTime = 0;
        var frame = 0;
        function render(time) {
            time *= 0.001; // Convert time to seconds
            var timeDelta = time - lastFrameTime;
            lastFrameTime = time;

            frame++;
            gl.uniform1f(iTimeLocation, time);
            gl.uniform1f(iTimeDeltaLocation, timeDelta);
            gl.uniform1i(iFrameLocation, frame);

            var date = new Date();
            gl.uniform4f(iDateLocation, date.getFullYear(), date.getMonth(), date.getDate(), date.getHours() * 3600 + date.getMinutes() * 60 + date.getSeconds());

            gl.clearColor(0.5, 0.5, 0.5, 1.0); // Set clear color to grey
            gl.clear(gl.COLOR_BUFFER_BIT);
            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
            requestAnimationFrame(render);
        }

        document.addEventListener('mousemove', function(event) {
            var mouseX = event.clientX;
            var mouseY = canvas.height - event.clientY;
            gl.uniform4f(iMouseLocation, mouseX, mouseY, 0, 0);
        });

        var vertices = new Float32Array([
            -1.0, -1.0,
             1.0, -1.0,
            -1.0,  1.0,
             1.0,  1.0,
        ]);

        var vertexBuffer = gl.createBuffer();
        gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
        gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);

        var positionAttribLocation = gl.getAttribLocation(program, "vertPosition");
        gl.vertexAttribPointer(positionAttribLocation, 2, gl.FLOAT, false, 0, 0);
        gl.enableVertexAttribArray(positionAttribLocation);

        requestAnimationFrame(render);
        }
        initializeWebGL(); // Call the function to initialize WebGL
    </script>
</body>
</html>
